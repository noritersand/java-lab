<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>frame test</title>
</head>
<body>
	<h2>parent</h2>
	<input type="text" id="locationInput" value="https://127.0.0.1:8443/html-test/iframe/iframe-test2.html" style="width: 100%">
	<button type="button" onclick="changeChildLocation()">change child location</button>
	<button type="button" onclick="changeChildLocation('/html-test/iframe/iframe-test2.html')">home</button>
	<button type="button" onclick="changeChildLocation('https://daum.net')">다음</button>
	<button type="button" onclick="addIframeAndAlert()">안보이는 프레임 만들기</button>
	<button type="button" onclick="alertForFirefox()">파폭용 얼럿창 테스트</button>
	<div style="margin-top: 5px;">
		<iframe style="width: 85%; height: 450px; border: 2px solid black;"  
				id="locationTest" src="/html-test/iframe/iframe-test2.html"></iframe>
	</div>
	<script>
		var childWindow = frames[0];
		var childDom = document.querySelector('#locationTest');
		childDom.onload = function() {
			childOnloadHandler();
		}
		function childOnloadHandler() {
			try {
				console.log(childWindow.location.href);
			} catch(e) {
				console.log('cross origin')
			}
		}
		function changeChildLocation(url) {
			var value = url || document.querySelector('#locationInput').value;
			childWindow.location.href = value;
		}
		function addIframeAndAlert() {
			window.hiddenframe = document.getElementById('alertTest');
			if (hiddenframe) {
				hiddenframe.parentNode.removeChild(alertTest);
			}
			hiddenframe = document.createElement('iframe');
	        hiddenframe.id = 'alertTest';
	        hiddenframe.style.visibility = 'hidden';
	        hiddenframe.style.display = 'none';
	        hiddenframe.src = '/html-test/iframe/iframe-test2.html';
	        document.body.appendChild(hiddenframe);
	        // 파폭에서는 얼럿 대화창이 보이자마자 바로 사라지는 현상이 있음.
	        hiddenframe.contentWindow.alert('안보이는 프레임에서 얼럿을 사용해도 대화창은 화면 중앙에 나타난다.');
		}
		function alertForFirefox() {
			hiddenframe.contentWindow.alert('안보이는 프레임에서 얼럿을 사용해도 대화창은 화면 중앙에 나타난다.');
		}
	</script>
</body>
</html>