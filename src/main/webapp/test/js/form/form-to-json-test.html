<!DOCTYPE html>
<html>
<head>
<title>Form element to JSON</title>
<meta charset="utf-8">
<link rel="stylesheet" href="/static/css/style2.css"/>
<script src="/static/js/jquery-1.12.4.js"></script>	
<script>
	function formToJson(targetElement) {
		var param = new Object();
		$(targetElement).find('input, textarea, select').each(function(idx, ele) {
			var name = $(ele).attr('name'),
				type = $(ele).attr('type'),
				checked = $(ele).prop('checked'),
				disabled = $(ele).prop('disabled'),
				val = $(ele).val();
			if (typeof name === 'undefined') {
				return true; // jquery each continue
			}
			if (type == 'checkbox' || type == 'radio') {
				if (checked && !disabled) {
					param[name] = val;
				}
			} else {
				if (!disabled) {
					param[name] = val;
				}
			}
		});
		return param;
	}
	$(function() {
		var formData = [];
		$('table').each(function(idx, ele) { 
			console.log('idx:', idx);
			formData.push(formToJson(ele));
		});
		console.log(JSON.stringify(formData));
		$('#result').html(JSON.stringify(formData));
	});
</script>
</head>
<body>
<h2>Form element to JSON</h2>
<section>
	<table>
		<tr>
			<td>
				<input type="text" name="txtIpt" value="introduce my self">
				<textarea name="txtarea" cols="30" rows="1">Textarea the firstborn</textarea>
				<label><input type="checkbox" name="chkbox" value="Y" checked> Y</label>
				<label><input type="checkbox" name="chkbox" value="N"> N</label>
			</td>
		</tr>
	</table>
</section>
<section>
	<table>
		<tr>
			<td>
				<input type="text" name="txtIpt" value="some meme">
				<textarea name="txtarea" cols="30" rows="1">Knowledge is power   - france is bacon</textarea>
				<label><input type="checkbox" name="chkbox" value="Y"> Y</label>
				<label><input type="checkbox" name="chkbox" value="N" checked> N</label>
			</td>
		</tr>
	</table>
</section>
<section>
	<table>
		<tr>
			<td>
				<input type="text" name="txtIpt" value="waldo">
				<textarea name="txtarea" cols="40" rows="1">Hello there! String and fine morning! If you ask me, I'm Waldo.</textarea>
				<label><input type="checkbox" name="chkbox" value="Y" checked> Y</label>
				<label><input type="checkbox" name="chkbox" value="N"> N</label>
			</td>
		</tr>
	</table>
</section>
<section>
	<div id="result"></div>
</section>
</body>
</html>