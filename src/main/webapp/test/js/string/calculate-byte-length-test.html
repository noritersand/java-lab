<!DOCTYPE html>
<html lang="ko">
<head>
<title>calculate byte length</title>
<meta charset="utf-8">
<link rel="stylesheet" href="/static/css/style.css"/>
<script src="/static/js/jquery-1.12.4.js"></script>
</head>
<script>
function calculateByteLength() {
	var targetElement = document.querySelector('#target');
	var resultElement = document.querySelector('#result');
	var value = targetElement.value;
	var byteLength = 0;
	for (var i = 0; i < value.length; i++) {
		var tmp = escape(value.charAt(i));
		if (tmp.length == 1) {
			byteLength++;
		} else if (tmp.indexOf('%u') != -1) {
			byteLength += 3;
		} else if (tmp.indexOf('%') != -1) {
			byteLength += tmp.length/3;
		}
	}
	resultElement.innerText = byteLength + ' bytes';
}
</script>
</head>
<body>
<div class="align-center">
	<h1>calculate byte length test</h1>
	<p>유니코드는 3byte, ASCII는 1byte로 계산</p>
	<textarea id="target" onkeyup="calculateByteLength()" style="margin: 0px; height: 215px; width: 513px;"></textarea> 
	<p id="result">0 bytes</p>
</div>
</body>
</html>